<!DOCTYPE html>
<html>
<head>
    <title>æµ‹æµ‹ä½ çš„</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="container">
        <h1>ğŸ° çƒ˜åŸ¹è›‹ç³•ï¼ ğŸ°</h1>
        
        <div class="test-section">
            <h3>ä¸Šä¼ åŸæ–™</h3>
            <form id="testForm" enctype="multipart/form-data">
                <input type="file" name="image" accept="image/*" required>
                <button type="submit">å¼€å§‹çƒ˜åŸ¹</button>
            </form>
        </div>
        
        <div id="result"></div>
        
        <div class="tips">
            <h4>è¯´æ˜ï¼š</h4>
            <p>è›‹ç³•å¦‚æœåæ‰äº†å°±ä¸å¥½åƒäº†</p>
            <p>åƒä¸‡ä¸è¦ç»™æˆ‘æ¯’è‹¹æœï¼</p>
            <img src="{{ url_for('static', filename='images/cake.png') }}" alt="è›‹ç³•ç¤ºä¾‹" style="width:200px;">
        </div>
    </div>
    
    <script>
        document.getElementById('testForm').onsubmit = async function(e) {
            e.preventDefault();
            const formData = new FormData(this);
            
            const response = await fetch('/test_cake', {
                method: 'POST',
                body: formData
            });
            
            const result = await response.json();
            const resultDiv = document.getElementById('result');
            
            if (result.error) {
                resultDiv.innerHTML = '<p style="color: red;">é”™è¯¯: ' + result.error + '</p>';
            } else {
                let html = `
                    <div class="result-box">
                        <p>Cake: ${result.cake_confidence}%</p>
                        <p>Porisoned_Apple: ${result.poisoned_apple_confidence}%</p>
                        <p>Other: ${result.other_confidence}%</p>
                        <p>Result: <strong>${result.predicted_class}</strong></p>
                `;
                
                if (result.flag) {
                    html += `
                        <div class="flag-box">
                            <p>ğŸ‰ FLAG: <code>${result.flag}</code></p>
                            <p>${result.message}</p>
                        </div>
                    `;
                }
                
                html += '</div>';
                resultDiv.innerHTML = html;
            }
        };
    </script>
</body>
</html>