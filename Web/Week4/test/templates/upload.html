<!DOCTYPE html>
<html>
<head>
    <title>Stockingçš„è›‹ç³•çƒ˜ç„™åŠ</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="container">
        <h1>ğŸ§ Stockingçš„è›‹ç³•çƒ˜ç„™åŠ ğŸ§</h1>
        <div class="stocking-character">
            <p>æ¬¢è¿å…‰ä¸´ï¼è¯·ä¸Šä¼ ä½ çš„çƒ˜ç„™ç§˜ç±~</p>
        </div>
        
        <div class="upload-section">
            <h3>çƒ˜ç„™ç§˜ç±</h3>
            <form id="uploadForm" enctype="multipart/form-data">
                <input type="file" name="model" accept=".pth" required>
                <button type="submit">ä¸Šä¼ ç§˜ç±</button>
            </form>
            <div id="uploadStatus"></div>
        </div>
        
        <div class="instructions">
            <h3>è¯´æ˜ï¼š</h3>
            <ul>
                <li>ä¸è¦è®©è›‹ç³•åæ‰å“¦~</li>
                <li>è›‹ç³•å°±ç®—åæ‰ä¹Ÿç»å¯¹ä¸èƒ½å˜æˆæ¯’è‹¹æœï¼</li>
                <li>å •å¤©åŸåªæ¥å—pthçš„ç§˜ç±ãƒ½ï¼ˆâ‰§â–¡â‰¦ï¼‰ãƒ</li>
            </ul>
        </div>
        
        <div class="next-step">
            <a href="/test_cake">å‰å¾€çƒ˜ç„™ â†’</a>
        </div>
    </div>
    
    <script>
        document.getElementById('uploadForm').onsubmit = async function(e) {
            e.preventDefault();
            const formData = new FormData(this);
            
            const response = await fetch('/upload_model', {
                method: 'POST',
                body: formData
            });
            
            const result = await response.json();
            const statusDiv = document.getElementById('uploadStatus');
            
            if (result.success) {
                statusDiv.innerHTML = '<p style="color: green;">ç§˜ç±ä¸Šä¼ æˆåŠŸï¼</p>';
                document.querySelector('.next-step').style.display = 'block';
            } else {
                statusDiv.innerHTML = '<p style="color: red;">é”™è¯¯: ' + result.error + '</p>';
            }
        };
    </script>
</body>
</html>